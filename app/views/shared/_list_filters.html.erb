<%# 
  Reusable filter component for lists
  
  Usage:
  <%= render 'shared/list_filters', 
      path: companies_path,
      filters: [
        { type: :search, name: :search, label: "Search", placeholder: "Search...", value: params[:search] },
        { type: :select, name: :plan, label: "Plan", options: [["All Plans", ""]] + @plans.map {|p| [p.humanize, p]}, value: params[:plan] }
      ] %>
%>

<div class="bg-white shadow-xl rounded-xl border border-gray-200 overflow-hidden mb-6">
  <div class="px-4 sm:px-6 py-4 border-b border-gray-200">
    <h3 class="text-lg font-medium text-gray-900">Filters</h3>
  </div>
  <div class="px-4 sm:px-6 py-4">
    <%= form_with url: path, method: :get, class: "space-y-4 sm:space-y-0 sm:grid sm:grid-cols-#{filters.count + 1} sm:gap-4", data: { turbo_frame: "_top" } do |form| %>
      <% filters.each do |filter| %>
        <div>
          <%= form.label filter[:name], filter[:label], class: "block text-sm font-medium text-gray-700 mb-1" %>
          <% if filter[:type] == :search %>
            <%= form.text_field filter[:name], 
                value: filter[:value],
                placeholder: filter[:placeholder],
                class: "w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out text-sm" %>
          <% elsif filter[:type] == :select %>
            <%= form.select filter[:name], 
                options_for_select(filter[:options], filter[:value]),
                {},
                class: "w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out text-sm" %>
          <% end %>
        </div>
      <% end %>
      
      <!-- Filter Buttons -->
      <div class="flex items-end space-x-2">
        <%= form.submit "Filter", 
            class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out" %>
        <%= link_to path, 
            class: "inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out" do %>
          Clear
        <% end %>
      </div>
    <% end %>
  </div>
</div>