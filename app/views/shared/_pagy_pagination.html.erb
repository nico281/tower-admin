<%#
  Pagy pagination component for lists
  
  Usage:
  render 'shared/pagy_pagination', 
      pagy: @pagy,
      item_name: "users"
%>

<div class="px-4 sm:px-6 py-4 border-t border-gray-200 bg-gray-50">
  <div class="flex items-center justify-between">
    <div class="text-sm text-gray-700">
      Showing <%= pagy.from %>-<%= pagy.to %> of <%= pagy.count %> <%= local_assigns[:item_name] || controller_name || 'items' %>
    </div>
    <div class="flex items-center space-x-1">
      <!-- Debug info -->
      <div class="text-xs text-gray-400 mr-2">
        Page <%= pagy.page %> of <%= pagy.pages %> (Count: <%= pagy.count %>)
      </div>
      
      <% if pagy.page > 1 %>
        <%= link_to "Previous", pagy_url_for(pagy, pagy.prev), 
            class: "px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 transition duration-150 ease-in-out" %>
      <% else %>
        <span class="px-3 py-2 text-sm font-medium text-gray-300 bg-gray-100 border border-gray-300 rounded-l-lg cursor-not-allowed">Previous</span>
      <% end %>
      
      <% if pagy.pages > 1 %>
        <% pagy.series.each do |item| %>
          <% case item %>
          <% when Integer %>
            <% if item == pagy.page %>
              <span class="px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 border border-indigo-300">
                <%= item %>
              </span>
            <% else %>
              <%= link_to item, pagy_url_for(pagy, item),
                  class: "px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 transition duration-150 ease-in-out" %>
            <% end %>
          <% when String %>
            <span class="px-3 py-2 text-sm font-medium text-gray-400 bg-white border border-gray-300">
              <%= item %>
            </span>
          <% end %>
        <% end %>
      <% else %>
        <span class="px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 border border-indigo-300">
          1
        </span>
      <% end %>
      
      <% if pagy.page < pagy.pages %>
        <%= link_to "Next", pagy_url_for(pagy, pagy.next),
            class: "px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 transition duration-150 ease-in-out" %>
      <% else %>
        <span class="px-3 py-2 text-sm font-medium text-gray-300 bg-gray-100 border border-gray-300 rounded-r-lg cursor-not-allowed">Next</span>
      <% end %>
    </div>
  </div>
</div>